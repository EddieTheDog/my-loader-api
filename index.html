<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loader API Engine</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Center the loader on the screen for the API view */
        body, html { 
            height: 100%; margin: 0; 
            display: flex; align-items: center; justify-content: center; 
            background: transparent; /* Allows embedding in iframes */
        }
    </style>
</head>
<body>
    <div id="loader-viewport"></div>

    <script>
        function getLoaderFromURL() {
            // 1. Get the loader type from the path (e.g., /spinner)
            const path = window.location.pathname.replace(/\//g, '');
            
            // 2. Get customization from Query Params (e.g., ?color=ff0000)
            const params = new URLSearchParams(window.location.search);
            const color = params.get('color') ? '#' + params.get('color') : '#38bdf8';
            const size = params.get('size') || '60px';
            const speed = params.get('speed') || '1s';

            const viewport = document.getElementById('loader-viewport');

            // Apply custom styles to variables
            document.documentElement.style.setProperty('--loader-color', color);
            document.documentElement.style.setProperty('--loader-size', size);
            document.documentElement.style.setProperty('--loader-speed', speed);

            // 3. Define the HTML for each URL path
            const library = {
                'spinner': '<div class="api-spinner"></div>',
                'ripple': '<div class="api-ripple"></div>',
                'morph': '<div class="api-morph"></div>',
                'composite': '<div class="api-composite"><div class="api-spinner"></div><div class="api-dots"><div class="api-dot"></div><div class="api-dot"></div><div class="api-dot"></div></div></div>',
                'skeleton': '<div class="api-skeleton" style="width:200px; height:20px;"></div>'
            };

            // 4. Render the requested loader or a Home Menu
            if (library[path]) {
                viewport.innerHTML = library[path];
            } else {
                viewport.innerHTML = `<h1>API Home</h1><p>Available paths: /spinner, /ripple, /morph, /composite, /skeleton</p>`;
            }
        }

        window.onload = getLoaderFromURL;
    </script>
</body>
</html>
