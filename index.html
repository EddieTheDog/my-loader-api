<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loader API | Documentation</title>
    <link rel="stylesheet" href="style.css">
    <style>
        :root { --panel-bg: #1e293b; --accent: #38bdf8; }
        body { margin: 0; background: #0f172a; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        #preview-area { height: 300px; display: flex; align-items: center; justify-content: center; width: 100%; border-bottom: 1px solid #334155; }
        .docs-container { max-width: 600px; width: 90%; padding: 40px 0; }
        .card { background: var(--panel-bg); padding: 25px; border-radius: 12px; border: 1px solid #334155; }
        .chip { background: #000; color: #f472b6; padding: 4px 8px; border-radius: 5px; font-family: monospace; font-size: 1rem; }
        .prop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .prop-item { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; font-size: 0.9rem; border: 1px solid rgba(255,255,255,0.1); }
        .prop-item b { color: var(--accent); display: block; margin-bottom: 4px; }
        h1 { text-transform: capitalize; color: var(--accent); margin-top: 0; }
    </style>
</head>
<body>

    <div id="preview-area">
        <div id="loader-mount"></div>
    </div>

    <div class="docs-container" id="docs-view" style="display:none;">
        <div class="card">
            <h1 id="title-text">Loader</h1>
            <p>To use this native API component, call:</p>
            <p><span class="chip">LoaderAPI.render({ type: '<span id="type-text"></span>', ... })</span></p>
            
            <h3 style="margin-top:30px;">Available Properties</h3>
            <div class="prop-grid" id="properties-list">
                </div>
        </div>
    </div>

    <script src="index.js"></script>
    <script>
        window.onload = () => {
            const path = window.location.pathname.replace(/\//g, '').toLowerCase();
            
            // The API configuration (This is the "Source of Truth")
            const config = {
                'spinner': ['color', 'size', 'speed'],
                'ripple': ['color', 'size'],
                'morph': ['color', 'size', 'speed'],
                'composite': ['color', 'size', 'speed'],
                'dots': ['color', 'size'],
                'skeleton': ['size']
            };

            if (config[path]) {
                // 1. Show the Docs panel
                document.getElementById('docs-view').style.display = 'block';
                document.getElementById('title-text').innerText = path;
                document.getElementById('type-text').innerText = path;

                // 2. Automatically list the properties (NOT hard-coded text)
                const list = document.getElementById('properties-list');
                config[path].forEach(prop => {
                    const item = document.createElement('div');
                    item.className = 'prop-item';
                    item.innerHTML = `<b>${prop}</b> Use URL param <code>?${prop}=value</code>`;
                    list.appendChild(item);
                });

                // 3. Render the preview
                const params = new URLSearchParams(window.location.search);
                LoaderAPI.render({
                    type: path,
                    target: '#loader-mount',
                    color: params.get('color') ? '#' + params.get('color') : undefined,
                    size: params.get('size') || undefined,
                    speed: params.get('speed') || undefined
                });
            } else {
                document.body.innerHTML = `<div style="padding:100px; text-align:center;"><h1>API Master Library</h1><p>Visit <code>/spinner</code>, <code>/ripple</code>, etc.</p></div>`;
            }
        };
    </script>
</body>
</html>
